import{a as P}from"./chunk-WPZPX5DT.js";import{a as b}from"./chunk-TL47X65L.js";import{b as F}from"./chunk-QF4QJE7T.js";import{a as k}from"./chunk-QVMFPQDW.js";import{A as C,D as x,G as S,H as h,J as N,L as y,N as B,R as U,T as q,u as T,w as m,z as v}from"./chunk-MSSECFFE.js";import{h as G,j as f,ma as g}from"./chunk-JCB2LSZI.js";import"./chunk-W5UVDF5Y.js";import{Fb as c,Kb as E,Lb as M,Nb as D,Ob as I,Pb as e,Qb as r,Rb as p,Yb as d,_b as L,fb as l,ia as n,kc as a,lc as A,rb as u,yb as w}from"./chunk-553H3WQF.js";var R=class o{fb=n(N);accountService=n(F);router=n(f);activatedRoute=n(G);returnUrl="/shop";constructor(){let i=this.activatedRoute.snapshot.queryParams["returnUr;"];i&&(this.returnUrl=i)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","","matInput",""],["formControlName","password","type","password","placeholder","","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(t,s){t&1&&(e(0,"mat-card",0)(1,"form",1),d("ngSubmit",function(){return s.onSubmit()}),e(2,"div",2)(3,"h1",3),a(4,"Login"),r()(),e(5,"mat-form-field",4)(6,"mat-label"),a(7,"Email Address"),r(),p(8,"input",5),r(),e(9,"mat-form-field",4)(10,"mat-label"),a(11,"Password"),r(),p(12,"input",6),r(),e(13,"button",7),a(14,"Sign in"),r()()()),t&2&&(l(),c("formGroup",s.loginForm))},dependencies:[y,x,T,v,C,S,h,b,U,q,B,g],encapsulation:2})};function Z(o,i){if(o&1&&(e(0,"li"),a(1),r()),o&2){let t=i.$implicit;l(),A(t)}}function H(o,i){if(o&1&&(e(0,"div",8)(1,"ul",10),D(2,Z,2,1,"li",null,M),r()()),o&2){let t=L();l(2),I(t.validationErrors)}}var _=class o{fb=n(N);accountService=n(F);router=n(f);snack=n(P);validationErrors;registerForm=this.fb.group({firstName:["",m.required],lastName:["",m.required],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6),m.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now log in"),this.router.navigateByUrl("/account/login")},error:i=>this.validationErrors=i})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-register"]],decls:12,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First Name","formControlName","firstName"],["label","Last Name","formControlName","lastName"],["label","Email Address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2"],[1,"list-disc","px-3"]],template:function(t,s){t&1&&(e(0,"mat-card",0)(1,"form",1),d("ngSubmit",function(){return s.onSubmit()}),e(2,"div",2)(3,"h1",3),a(4,"Register"),r()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),w(9,H,4,0,"div",8),e(10,"button",9),a(11,"Register"),r()()()),t&2&&(l(),c("formGroup",s.registerForm),l(8),E(s.validationErrors?9:-1))},dependencies:[y,x,v,C,S,h,b,g,k],encapsulation:2})};var gt=[{path:"login",component:R},{path:"register",component:_}];export{gt as accountRoutes};
