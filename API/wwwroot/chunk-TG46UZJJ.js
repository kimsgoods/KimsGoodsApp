import{a as M,b as Z}from"./chunk-CRLWXKZW.js";import{a as y}from"./chunk-I6V4ICJT.js";import{b as D}from"./chunk-3QIZL2WF.js";import{A as _,C as p,E as $,F as f,G as N,J as E,L as z,M as F,N as w,P as I,R as g,T as R,U as O,X as T}from"./chunk-HZOLZAUA.js";import{h as k,j as h,na as S}from"./chunk-5LRCDLK5.js";import"./chunk-W5UVDF5Y.js";import{Eb as d,Jb as s,Kb as V,Mb as q,Nb as B,Ob as i,Pb as r,Qb as c,Xb as C,Zb as b,ac as U,fb as n,ia as l,jc as a,kb as P,kc as x,lc as j,rb as u,xb as v}from"./chunk-FXMMOEPG.js";var A=class t{fb=l(I);accountService=l(D);router=l(h);activatedRoute=l(k);returnUrl="/shop";constructor(){let e=this.activatedRoute.snapshot.queryParams["returnUr;"];e&&(this.returnUrl=e)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=u({type:t,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","","matInput",""],["formControlName","password","type","password","placeholder","","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(o,m){o&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return m.onSubmit()}),i(2,"div",2)(3,"h1",3),a(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),a(7,"Email Address"),r(),c(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),a(11,"Password"),r(),c(12,"input",6),r(),i(13,"button",7),a(14,"Sign in"),r()()()),o&2&&(n(),d("formGroup",m.loginForm))},dependencies:[g,E,_,f,N,F,w,y,T,M,R,S],encapsulation:2})};function W(t,e){if(t&1&&(i(0,"mat-error"),a(1),r()),t&2){let o=b();n(),j("",o.label," is required")}}function X(t,e){t&1&&(i(0,"mat-error"),a(1,"Email is invalid"),r())}function Y(t,e){t&1&&(i(0,"mat-error"),a(1,"Password must be at least 6 characters"),r())}function tt(t,e){t&1&&(i(0,"mat-error"),a(1,"Password must be at least 6 characters and include an uppercase letter, lowercase letter, number, and special character"),r())}var L=class t{constructor(e){this.controlDir=e;this.controlDir.valueAccessor=this}label="";type="text";writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.controlDir.control}static \u0275fac=function(o){return new(o||t)(P($,2))};static \u0275cmp=u({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:8,vars:7,consts:[["appearance","outline",1,"w-full","mb-4"],["placeholder","","matInput","",3,"formControl","type"]],template:function(o,m){o&1&&(i(0,"mat-form-field",0)(1,"mat-label"),a(2),r(),c(3,"input",1),v(4,W,2,1,"mat-error")(5,X,2,0,"mat-error")(6,Y,2,0,"mat-error")(7,tt,2,0,"mat-error"),r()),o&2&&(n(2),x(m.label),n(),U("type",m.type),d("formControl",m.control),n(),s(m.control.hasError("required")?4:-1),n(),s(m.control.hasError("email")?5:-1),n(),s(m.control.hasError("minLength")?6:-1),n(),s(m.control.hasError("pattern")?7:-1))},dependencies:[g,_,f,z,T,M,O,R],encapsulation:2})};function et(t,e){if(t&1&&(i(0,"li"),a(1),r()),t&2){let o=e.$implicit;n(),x(o)}}function ot(t,e){if(t&1&&(i(0,"div",8)(1,"ul",10),q(2,et,2,1,"li",null,V),r()()),t&2){let o=b();n(2),B(o.validationErrors)}}var G=class t{fb=l(I);accountService=l(D);router=l(h);snack=l(Z);validationErrors;registerForm=this.fb.group({firstName:["",p.required],lastName:["",p.required],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6),p.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)]]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now log in"),this.router.navigateByUrl("/account/login")},error:e=>this.validationErrors=e})}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=u({type:t,selectors:[["app-register"]],decls:12,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First Name","formControlName","firstName"],["label","Last Name","formControlName","lastName"],["label","Email Address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2"],[1,"list-disc","px-3"]],template:function(o,m){o&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return m.onSubmit()}),i(2,"div",2)(3,"h1",3),a(4,"Register"),r()(),c(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),v(9,ot,4,0,"div",8),i(10,"button",9),a(11,"Register"),r()()()),o&2&&(n(),d("formGroup",m.registerForm),n(8),s(m.validationErrors?9:-1))},dependencies:[g,E,f,N,F,w,y,S,L],encapsulation:2})};var Dt=[{path:"login",component:A},{path:"register",component:G}];export{Dt as accountRoutes};
